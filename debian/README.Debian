hiphop-php for Debian
---------------------

This is the start of the packaging

test with :
dpkg-buildpackage   -b


 -- James Michael DuPont <JamesMikeDuPont@googlemail.com>  Sat, 20 Feb 2010 11:27:49 +0100


#1 First Bug :
cd /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/builddir/src && /media/NewFoundSpace/usr/local/bin/c++   -D_GNU_SOURCE -D_REENTRANT=1 -D_PTHREADS=1 -fPIC -fno-omit-frame-pointer -ftemplate-depth-60 -Wall -Woverloaded-virtual -Wno-deprecated -Wno-parentheses -Wno-strict-aliasing -Wno-write-strings  -I/usr/local/include -I/usr/include/mysql -I/usr/include/libxml2 -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libsqlite3 -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/timelib -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/xhp/xhp -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libafdt/src -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl/mbfl -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl/filter -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/lib/system/gen   -o CMakeFiles/hphp_runtime_static.dir/cpp/base/string_offset.cpp.o -c /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/string_offset.cpp
In file included from /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/zend/zend_string.h:22:0,
                 from /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/type_string.h:24,
                 from /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/string_offset.cpp:18:
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/type_variant.h:95:3: error: ‘HPHP::Variant::Variant(ssize_t)’ cannot be overloaded
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/type_variant.h:92:3: error: with ‘HPHP::Variant::Variant(int)’

Problem:
	int is the same as ssize_t

Fix :
    remove the definition.


bug #2

cd /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/builddir/src && /media/NewFoundSpace/usr/local/bin/c++   -D_GNU_SOURCE -D_REENTRANT=1 -D_PTHREADS=1 -fPIC -fno-omit-frame-pointer -ftemplate-depth-60 -Wall -Woverloaded-virtual -Wno-deprecated -Wno-parentheses -Wno-strict-aliasing -Wno-write-strings  -I/usr/local/include -I/usr/include/mysql -I/usr/include/libxml2 -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libsqlite3 -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/timelib -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/xhp/xhp -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libafdt/src -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl/mbfl -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl/filter -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/lib/system/gen   -o CMakeFiles/hphp_runtime_static.dir/cpp/base/program_functions.cpp.o -c /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/program_functions.cpp
In file included from /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/server/transport.h:23:0,
                 from /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/execution_context.h:20,
                 from /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/builtin_functions.h:20,
                 from /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/program_functions.cpp:18:
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/type_array.h:314:11: error: ‘HPHP::Variant HPHP::Array::rvalAt(ssize_t, HPHP::int64) const’ cannot be overloaded
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/type_array.h:306:11: error: with ‘HPHP::Variant HPHP::Array::rvalAt(int, HPHP::int64) const’
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/type_array.h:337:17: error: ‘const HPHP::Variant HPHP::Array::operator[](ssize_t) const’ cannot be overloaded
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/type_array.h:335:17: error: with ‘const HPHP::Variant HPHP::Array::operator[](int) const’
In file included from /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/program_functions.cpp:18:0:
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/builtin_functions.h: In function ‘ssize_t HPHP::id(ssize_t)’:
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/builtin_functions.h:569:16: error: redefinition of ‘ssize_t HPHP::id(ssize_t)’
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/builtin_functions.h:566:16: error: ‘int HPHP::id(int)’ previously defined here
make[3]: *** [src/CMakeFiles/hphp_runtime_static.dir/cpp/base/program_functions.cpp.o] Error 1

Solution : 
use the ifndef ssize_t_NOT_INT

Changed ssize_t to "long int"
I think we should make some definitions for ssize_t. 

 bug #3

p_runtime_static.dir/cpp/base/server/libevent_transport.cpp.o -c /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/server/libevent_transport.cpp
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/server/libevent_transport.cpp: In constructor ‘HPHP::LibEventTransport::LibEventTransport(HPHP::LibEventServer*, evhttp_request*, int)’:
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/base/server/libevent_transport.cpp:69:34: error: ‘struct evhttp_request’ has no member named ‘ext_method’

bug #4 
cd /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/builddir/src && /media/NewFoundSpace/usr/local/bin/c++   -D_GNU_SOURCE -D_REENTRANT=1 -D_PTHREADS=1 -fPIC -fno-omit-frame-pointer -ftemplate-depth-60 -Wall -Woverloaded-virtual -Wno-deprecated -Wno-parentheses -Wno-strict-aliasing -Wno-write-strings  -I/usr/local/include -I/usr/include/mysql -I/usr/include/libxml2 -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libsqlite3 -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/timelib -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/xhp/xhp -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libafdt/src -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl/mbfl -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl/filter -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/lib/system/gen   -o CMakeFiles/hphp_runtime_static.dir/cpp/ext/ext_class.cpp.o -c /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_class.cpp
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_class.cpp: In function ‘bool HPHP::f_class_exists(const HPHP::String&, bool)’:
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_class.cpp:44:9: error: ‘HPHP::ClassInfo::ClassInfo’ names the constructor, not the type
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_class.cpp:46:10: error: ‘info’ was not declared in this scope
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_class.cpp: In function ‘bool HPHP::f_interface_exists(const HPHP::String&, bool)’:
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_class.cpp:50:9: error: ‘HPHP::ClassInfo::ClassInfo’ names the constructor, not the type
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_class.cpp:52:10: error: ‘info’ was not declared in this scope
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_class.cpp:53:1: warning: control reaches end of non-void function
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_class.cpp: In function ‘bool HPHP::f_class_exists(const HPHP::String&, bool)’:
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_class.cpp:47:1: warning: control reaches end of non-void function
make[3]: *** [src/CMakeFiles/hphp_runtime_static.dir/cpp/ext/ext_class.cpp.o] Error 1

bug #5

[  6%] Building CXX object src/CMakeFiles/hphp_runtime_static.dir/cpp/ext/ext_mb.cpp.o
cd /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/builddir/src && /media/NewFoundSpace/usr/local/bin/c++   -D_GNU_SOURCE -D_REENTRANT=1 -D_PTHREADS=1 -fPIC -fno-omit-frame-pointer -ftemplate-depth-60 -Wall -Woverloaded-virtual -Wno-deprecated -Wno-parentheses -Wno-strict-aliasing -Wno-write-strings  -I/usr/local/include -I/usr/include/mysql -I/usr/include/libxml2 -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libsqlite3 -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/timelib -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/xhp/xhp -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libafdt/src -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl/mbfl -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl/filter -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/lib/system/gen   -o CMakeFiles/hphp_runtime_static.dir/cpp/ext/ext_mb.cpp.o -c /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_mb.cpp
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_mb.cpp:28:31: fatal error: mbfl/mbfl_convert.h: No such file or directory
compilation terminated.

#6 
[  9%] Building CXX object src/CMakeFiles/hphp_runtime_static.dir/cpp/ext/ext_icu.cpp.o
cd /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/builddir/src && /media/NewFoundSpace/usr/local/bin/c++   -D_GNU_SOURCE -D_REENTRANT=1 -D_PTHREADS=1 -fPIC -fno-omit-frame-pointer -ftemplate-depth-60 -Wall -Woverloaded-virtual -Wno-deprecated -Wno-parentheses -Wno-strict-aliasing -Wno-write-strings  -I/usr/local/include -I/usr/include/mysql -I/usr/include/libxml2 -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libsqlite3 -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/timelib -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/xhp/xhp -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libafdt/src -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl/mbfl -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/third_party/libmbfl/filter -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src -I/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/lib/system/gen   -o CMakeFiles/hphp_runtime_static.dir/cpp/ext/ext_icu.cpp.o -c /media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_icu.cpp
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_icu.cpp: In function ‘HPHP::String HPHP::f_icu_transliterate(const HPHP::String&, bool)’:
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_icu.cpp:71:25: error: ‘fromUTF8’ is not a member of ‘icu_4_0::UnicodeString’
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_icu.cpp:81:3: error: ‘CheckedArrayByteSink’ was not declared in this scope
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_icu.cpp:81:24: error: expected ‘;’ before ‘bs’
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_icu.cpp:82:9: error: ‘class icu_4_0::UnicodeString’ has no member named ‘toUTF8’
/media/sdd2/home/mdupont/2010/02/hiphop/hiphop-php-0.1/src/cpp/ext/ext_icu.cpp:82:16: error: ‘bs’ was not declared in this scope
make[3]: *** [src/CMakeFiles/hphp_runtime_static.dir/cpp/ext/ext_icu.cpp.o] Error 1
